(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/detail/index"],{"37b5":function(e,a,n){},"4dda":function(e,a,n){"use strict";n.r(a);var t=n("de1f"),i=n("7beb");for(var o in i)"default"!==o&&function(e){n.d(a,e,function(){return i[e]})}(o);n("6a2c");var r=n("2877"),c=Object(r["a"])(i["default"],t["a"],t["b"],!1,null,null,null);a["default"]=c.exports},"6a2c":function(e,a,n){"use strict";var t=n("37b5"),i=n.n(t);i.a},"741b":function(e,a,n){"use strict";(function(e){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var t=n("2a7e"),i=(t.baseHost,t.imgUrl,t.warnRule),o=t.warnState,r=t.setCookie,c=t.getCookie,s=(t.myAjax,t.myAjax2),u=t.getWarnCookie,l=(t.setWarnCookie,t.audioPause,t.changeWarn),d=t.checkWarn,m=wx.getBackgroundAudioManager(),v={data:function(){return{title:"Smater 守护",showToast:0,toastTxt:"",loading:0,userInfo:null,deviceNos:"",accessToken:null,breathNum:"--",deviceStatus:null,heartNum:"--",markTime:null,motionNum:null,timer:null,device:"",deviceTimes:"",deviceStart:"",deviceEnd:"",heart:"",heartUp:"",heartDown:"",breath:"",breathUp:"",breathDown:"",motion:"",motionTimes:"",motionStart:"",motionEnd:"",warnNing:0,warningText:"",warnNo:"",warnDeviceTime:"",warnHeartTime:"",warnBreathTime:"",warnMotionTime:"",firstTimes:0}},onLoad:function(){},onLaunch:function(){},onShow:function(){var a=this,n=c("accessToken"),t=c("deviceNos"),i=c("username");n?t?(l(a),u(a),a.userInfo=i,a.accessToken=n,a.deviceNos=t,a.getActual(),a.timer=setInterval(function(){a.getActual()},3e3)):e.redirectTo({url:"../code/index"}):e.redirectTo({url:"../login/index"})},onHide:function(){clearInterval(this.timer)},onUnload:function(){clearInterval(this.timer)},methods:{getActual:function(a){console.log("获取设备当前的状态一次(detail)!"," at pages\\detail\\index.vue:174"),a&&(this.loading=1);var n={deviceNos:this.deviceNos},t=this;s("post","/device/physiology/actual",n,function(a){if("10000"==a.retCode){var n=a.successData[0].deviceStatus;i.device&&"4"==t.deviceStatus&&"3"==n&&!o.warnDeviceTime&&(console.log("离床已记录，以此时间为基准开始计算报警数据"," at pages\\detail\\index.vue:190"),o.warnDeviceTime=Date.parse(new Date),o.warnHeartTime=null,o.warnBreathTime=null,o.warnMotionTime=null,t.warnDeviceTime=o.warnDeviceTime,t.warnHeartTime=null,t.warnBreathTime=null,t.warnMotionTime=null),"4"==n&&(o.warnDeviceTime=null,t.warnDeviceTime=null,console.log("解除离床报警计算数据"," at pages\\detail\\index.vue:203")),d(t,a,m),t.deviceStatus=n,t.breathNum=a.successData[0].breath,t.heartNum=a.successData[0].heart,t.markTime=a.successData[0].markTime,t.motionNum=a.successData[0].motion,t.loading=0}else r("accessToken",""),r("username",""),e.redirectTo({url:"../login/index"})},function(e){})},linkRecord:function(){e.navigateTo({url:"../record/index"})},linkSetting:function(){e.navigateTo({url:"../setting/index"})},setSocketTask:function(){this.firstTimes=1;var e=t.getCookie("accessToken"),a=this;wx.connectSocket({url:"ws://stream.darma.cn:17004/ws",sluccess:function(){},fail:function(){}}),wx.onSocketOpen(function(){var n={msgType:"login",data:{token:e,deviceNo:a.deviceNos}};wx.sendSocketMessage({data:JSON.stringify(n)})}),wx.onSocketMessage(function(e){console.log("***************************detail回执"," at pages\\detail\\index.vue:274"),"healthBreathData"==JSON.parse(e.data).msgType||JSON.parse(e.data).msgType,"deviceStatus"==JSON.parse(e.data).msgType&&t.warnRule.device&&(console.log("222222222222---"+JSON.parse(e.data).data.deviceStatus," at pages\\detail\\index.vue:285"),"3"==JSON.parse(e.data).data.deviceStatus?(console.log("离床已记录，以此时间为基准开始计算报警数据"," at pages\\detail\\index.vue:287"),o.warnDeviceTime=Date.parse(new Date),o.warnHeartTime=null,o.warnBreathTime=null,o.warnMotionTime=null,a.warnDeviceTime=o.warnDeviceTime,a.warnHeartTime=null,a.warnBreathTime=null,a.warnMotionTime=null):(o.warnDeviceTime=null,a.warnDeviceTime=null,console.log("解除离床报警计算数据"," at pages\\detail\\index.vue:299")))}),wx.onSocketError(function(){})},audioPause:function(){t.audioPause(this,m)}}};a.default=v}).call(this,n("6e42")["default"])},"7beb":function(e,a,n){"use strict";n.r(a);var t=n("741b"),i=n.n(t);for(var o in t)"default"!==o&&function(e){n.d(a,e,function(){return t[e]})}(o);a["default"]=i.a},de1f:function(e,a,n){"use strict";var t=function(){var e=this,a=e.$createElement;e._self._c},i=[];n.d(a,"a",function(){return t}),n.d(a,"b",function(){return i})}},[["9f18","common/runtime","common/vendor"]]]);