(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/detail/index"],{3610:function(e,n,t){"use strict";var a=function(){var e=this,n=e.$createElement;e._self._c},o=[];t.d(n,"a",function(){return a}),t.d(n,"b",function(){return o})},"37b5":function(e,n,t){},"4dda":function(e,n,t){"use strict";t.r(n);var a=t("3610"),o=t("7beb");for(var i in o)"default"!==i&&function(e){t.d(n,e,function(){return o[e]})}(i);t("6a2c");var c=t("2877"),u=Object(c["a"])(o["default"],a["a"],a["b"],!1,null,null,null);n["default"]=u.exports},"6a2c":function(e,n,t){"use strict";var a=t("37b5"),o=t.n(a);o.a},"741b":function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=t("2a7e"),o=a.getCookie,i=a.setCookie,c=(a.myAjax,a.myAjax2),u=a.checkWarn,r=a.warnState,s=wx.getBackgroundAudioManager(),d={data:function(){return{title:"微麟守护者",toast:0,toastTxt:"",loading:0,userInfo:null,deviceNos:"",accessToken:null,breathNum:"--",deviceStatus:null,heartNum:"--",markTime:null,motionNum:null,timer:null,warnNing:0,warningText:"",warnNo:"",warnDeviceTime:"",warnHeartTime:"",warnBreathTime:"",warnMotionTime:""}},onLoad:function(){var n=this,t=o("accessToken"),i=o("deviceNos"),c=o("username");t?i?(a.changeWarn(n,s),a.getWarnCookie(n),n.userInfo=c,n.accessToken=t,n.deviceNos=i,n.getActual(),n.setSocketTask(),n.timer=setInterval(function(){n.getActual()},5e3)):e.redirectTo({url:"../code/index"}):e.redirectTo({url:"../login/index"})},onLaunch:function(){},onShow:function(){a.changeWarn(this)},onHide:function(){},onUnload:function(){},methods:{getActual:function(){var n={deviceNos:this.deviceNos},t=this;c("post","/device/physiology/actual",n,function(n){"10000"==n.retCode?(u(t,n,s),t.breathNum=n.successData[0].breath,t.deviceStatus=n.successData[0].deviceStatus,t.heartNum=n.successData[0].heart,t.markTime=n.successData[0].markTime,t.motionNum=n.successData[0].motion):(i("accessToken",""),i("username",""),e.redirectTo({url:"../login/index"}))},function(e){})},linkRecord:function(){e.navigateTo({url:"../record/index"})},linkSetting:function(){e.navigateTo({url:"../setting/index"})},setSocketTask:function(){var e=a.getCookie("accessToken"),n=this;wx.connectSocket({url:"ws://stream.darma.cn:17004/ws",sluccess:function(){},fail:function(){}}),wx.onSocketOpen(function(){var t={msgType:"login",data:{token:e,deviceNo:n.deviceNos}};wx.sendSocketMessage({data:JSON.stringify(t)})}),wx.onSocketMessage(function(e){"deviceStatus"==JSON.parse(e.data).msgType&&r.device&&("3"==JSON.parse(e.data).data.deviceStatus?r.warnDeviceTime=Date.parse(new Date):r.warnDeviceTime=null)}),wx.onSocketError(function(){})},audioPause:function(){a.audioPause(this,s)}}};n.default=d}).call(this,t("6e42")["default"])},"7beb":function(e,n,t){"use strict";t.r(n);var a=t("741b"),o=t.n(a);for(var i in a)"default"!==i&&function(e){t.d(n,e,function(){return a[e]})}(i);n["default"]=o.a}},[["9f18","common/runtime","common/vendor"]]]);