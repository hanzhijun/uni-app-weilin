(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/record/index"],{"0837":function(e,t,i){"use strict";i.r(t);var n=i("e16b"),a=i.n(n);for(var o in n)"default"!==o&&function(e){i.d(t,e,function(){return n[e]})}(o);t["default"]=a.a},1414:function(e,t,i){"use strict";var n=i("6191"),a=i.n(n);a.a},1962:function(e,t,i){"use strict";i.r(t);var n=i("a951"),a=i("0837");for(var o in a)"default"!==o&&function(e){i.d(t,e,function(){return a[e]})}(o);i("1414");var r=i("2877"),s=Object(r["a"])(a["default"],n["a"],n["b"],!1,null,null,null);t["default"]=s.exports},6191:function(e,t,i){},a951:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement;e._self._c},a=[];i.d(t,"a",function(){return n}),i.d(t,"b",function(){return a})},e16b:function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=o(i("0687"));function o(e){return e&&e.__esModule?e:{default:e}}var r=null,s=null,c=null,u=i("2a7e"),l=u.getCookie,h=(u.setCookie,u.getWarnCookie),d=u.changeWarn,f=u.myAjax2,g=wx.getBackgroundAudioManager(),m={data:function(){return{title:"历史记录",toast:0,toastTxt:"",loading:0,userInfo:null,deviceNos:"",accessToken:null,breathNum:"--",deviceStatus:null,heartNum:"--",markTime:null,motionNum:null,timer:null,tabNum:"1",startTime:null,endTime:null,historyData:[],cWidth:"",cHeight:"",cWidth2:"",cHeight2:"",pixelRatio:1,serverData:"",firstLoad:0,warnNing:0,warningText:"",warnNo:"",warnDeviceTime:"",warnHeartTime:"",warnBreathTime:"",warnMotionTime:""}},onLoad:function(){n=this,setTimeout(function(){n.firstLoad=1},2e3),n.timer=setInterval(function(){u.changeWarn(n)},1e3),n.cWidth=e.upx2px(750),n.cHeight=e.upx2px(500),n.cWidth2=e.upx2px(700),n.cHeight2=e.upx2px(1100)},onLaunch:function(){},onShow:function(){var t=this,i=u.getCookie("accessToken"),n=l("deviceNos");i?n?(t.accessToken=i,t.deviceNos=n,d(t,g),h(t),t.getTime(1),t.history()):e.redirectTo({url:"../code/index"}):wx.redirectTo({url:"../login/index"})},onHide:function(){},onUnload:function(){clearInterval(this.timer)},methods:{checkWarnState:function(){},linkToLogin:function(){e.redirectTo({url:"../login/index"})},changeNav:function(e){var t=this.tabNum;t!=e&&(this.tabNum=e,this.getTime(e),this.history())},getTime:function(e){var t=Date.parse(new Date),i=null;"1"==e?i=this.getTodayStartTime():"2"==e?i=parseInt(t/1e3)-259200:"3"==e&&(i=parseInt(t/1e3)-604798),this.endTime=parseInt(t/1e3),this.startTime=i},history:function(){this.loading=1;var e={deviceNos:this.deviceNos,startTime:this.startTime,endTime:this.endTime},t=this;f("post","/device/physiology/history",e,function(e){"10000"==e.retCode&&t.setHistoryData(e)},function(e){})},setHistoryData:function(e){for(var t=e.successData,i=[],n=[],a=[],o=[],r=[],s=t.length-1;s>-1;s--){var c={heart:t[s].heart,breath:t[s].breath,motion:1*t[s].motion.substring(0,1),time:this.getLocalTime(t[s].createTime)};i.push(c),n.push(this.getLocalTime(t[s].createTime).substring(0,11)),a.push(t[s].heart),o.push(t[s].breath),r.push(1*t[s].motion.substring(0,1))}this.historyData=i,this.chartsTime=n,this.chartsHeart=a,this.chartsBreath=o,this.chartsTidong=r;var u={categories:n,series:[{name:"心率",data:a,color:"#1890ff"},{name:"呼吸率",data:o,color:"#2fc25b"},{name:"体动值",data:r,color:"#facc14"}]};u.categories.length>0&&u.series.length>0&&(this.showLineB("canvasLineB",u),this.showArea("canvasArea",u))},getLocalTime:function(e){var t=new Date(1e3*e),i=t.getMonth()+1;i<10&&(i="0"+i);var n=t.getDate();n<10&&(n="0"+n);var a=t.getHours();a<10&&(a="0"+a);var o=t.getMinutes();o<10&&(o="0"+o);var r=t.getSeconds();return r<10&&(r="0"+r),i+"-"+n+" "+a+":"+o+":"+r},getTodayStartTime:function(){var e=new Date(Date.parse(new Date)),t=e.getFullYear(),i=e.getMonth()+1,n=e.getDate(),a=t+"/"+i+"/"+n+" 00:00:01";return new Date(a).getTime()/1e3},showLineB:function(e,t){s=new a.default({$this:n,canvasId:e,type:"line",fontSize:11,legend:!0,background:"#FFFFFF",pixelRatio:n.pixelRatio,rotate:!0,categories:t.categories,animation:!1,series:t.series,xAxis:{disableGrid:!0},yAxis:{},width:n.cWidth2*n.pixelRatio,height:n.cHeight2*n.pixelRatio,dataLabel:!1,dataPointShape:!0,extra:{lineStyle:"curve"}})},showArea:function(e,t){c=new a.default({$this:n,canvasId:e,type:"area",fontSize:11,legend:!0,background:"#FFFFFF",pixelRatio:n.pixelRatio,categories:t.categories,animation:!1,series:t.series,xAxis:{disableGrid:!0},yAxis:{},width:n.cWidth*n.pixelRatio,height:n.cHeight*n.pixelRatio,dataLabel:!1,dataPointShape:!0})},touchLineA:function(e){r.scrollStart(e)},moveLineA:function(e){r.scroll(e)},touchEndLineA:function(e){r.scrollEnd(e),r.showToolTip(e,{format:function(e,t){return t+" "+e.name+":"+e.data}})},touchLineB:function(e){s.showToolTip(e,{format:function(e,t){return t+" "+e.name+":"+e.data}})},touchArea:function(e){c.showToolTip(e,{format:function(e,t){return t+" "+e.name+":"+e.data}})},audioPause:function(){u.audioPause(this,g)}}};t.default=m}).call(this,i("6e42")["default"])}},[["333c","common/runtime","common/vendor"]]]);