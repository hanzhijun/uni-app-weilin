(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/record/index"],{"0837":function(t,e,i){"use strict";i.r(e);var n=i("e16b"),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);e["default"]=a.a},1414:function(t,e,i){"use strict";var n=i("6191"),a=i.n(n);a.a},1962:function(t,e,i){"use strict";i.r(e);var n=i("7708"),a=i("0837");for(var o in a)"default"!==o&&function(t){i.d(e,t,function(){return a[t]})}(o);i("1414");var r=i("2877"),s=Object(r["a"])(a["default"],n["a"],n["b"],!1,null,null,null);e["default"]=s.exports},6191:function(t,e,i){},7708:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c},a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},e16b:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("0687"));function a(t){return t&&t.__esModule?t:{default:t}}var o=null,r=null,s=null,c=i("2a7e"),u=c.getCookie,h=c.myAjax2,l=c.getWarnCookie,d=c.changeWarnToThis,f={data:function(){return{title:"历史记录",showToast:0,toastTxt:"",loading:0,userInfo:null,deviceNos:"",accessToken:null,breathNum:"--",deviceStatus:null,heartNum:"--",markTime:null,motionNum:null,timer:null,tabNum:"1",startTime:null,endTime:null,historyData:[],cWidth:"",cHeight:"",cWidth2:"",cHeight2:"",pixelRatio:1,serverData:"",firstLoad:0,device:"",deviceTimes:"",deviceStart:"",deviceEnd:"",heart:"",heartUp:"",heartDown:"",breath:"",breathUp:"",breathDown:"",motion:"",motionTimes:"",motionStart:"",motionEnd:"",warnNing:0,warningText:"",warnNo:"",warnDeviceTime:"",warnHeartTime:"",warnBreathTime:"",warnMotionTime:""}},onLoad:function(){var e=this;setTimeout(function(){e.firstLoad=1},2e3),e.timer=setInterval(function(){d(e)},1e3),e.cWidth=t.upx2px(750),e.cHeight=t.upx2px(500),e.cWidth2=t.upx2px(700),e.cHeight2=t.upx2px(1100)},onLaunch:function(){},onShow:function(){var e=this,i=c.getCookie("accessToken"),n=u("deviceNos");i?n?(e.accessToken=i,e.deviceNos=n,d(e),l(e),e.getTime(1),e.history()):t.redirectTo({url:"../code/index"}):wx.redirectTo({url:"../login/index"})},onHide:function(){},onUnload:function(){clearInterval(this.timer)},methods:{linkToLogin:function(){t.redirectTo({url:"../login/index"})},changeNav:function(t){var e=this.tabNum;e!=t&&(this.tabNum=t,this.getTime(t),this.history())},getTime:function(t){var e=Date.parse(new Date),i=null;"1"==t?i=this.getTodayStartTime():"2"==t?i=parseInt(e/1e3)-259200:"3"==t&&(i=parseInt(e/1e3)-604798),this.endTime=parseInt(e/1e3),this.startTime=i},history:function(){this.loading=1;var t={deviceNos:this.deviceNos,startTime:this.startTime,endTime:this.endTime},e=this;e.loading=1,h("post","/device/physiology/history",t,function(t){"10000"==t.retCode&&e.setHistoryData(t)},function(t){})},setHistoryData:function(t){for(var e=t.successData,i=[],n=[],a=[],o=[],r=[],s=e.length-1;s>-1;s--){var c={heart:e[s].heart,breath:e[s].breath,motion:1*e[s].motion.substring(0,1),time:this.getLocalTime(e[s].createTime)};i.push(c),n.push(this.getLocalTime(e[s].createTime).substring(0,11)),a.push(e[s].heart),o.push(e[s].breath),r.push(1*e[s].motion.substring(0,1))}this.historyData=i,this.chartsTime=n,this.chartsHeart=a,this.chartsBreath=o,this.chartsTidong=r;var u={categories:n,series:[{name:"心率",data:a,color:"#1890ff"},{name:"呼吸率",data:o,color:"#2fc25b"},{name:"体动值",data:r,color:"#facc14"}]};u.categories.length>0&&u.series.length>0&&(this.showLineB("canvasLineB",u),this.showArea("canvasArea",u)),this.loading=0},getLocalTime:function(t){var e=new Date(1e3*t),i=e.getMonth()+1;i<10&&(i="0"+i);var n=e.getDate();n<10&&(n="0"+n);var a=e.getHours();a<10&&(a="0"+a);var o=e.getMinutes();o<10&&(o="0"+o);var r=e.getSeconds();return r<10&&(r="0"+r),i+"-"+n+" "+a+":"+o+":"+r},getTodayStartTime:function(){var t=new Date(Date.parse(new Date)),e=t.getFullYear(),i=t.getMonth()+1,n=t.getDate(),a=e+"/"+i+"/"+n+" 00:00:01";return new Date(a).getTime()/1e3},showLineB:function(t,e){var i=this;r=new n.default({$this:i,canvasId:t,type:"line",fontSize:11,legend:!0,background:"#FFFFFF",pixelRatio:i.pixelRatio,rotate:!0,categories:e.categories,animation:!1,series:e.series,xAxis:{disableGrid:!0},yAxis:{},width:i.cWidth2*i.pixelRatio,height:i.cHeight2*i.pixelRatio,dataLabel:!1,dataPointShape:!1,extra:{lineStyle:"curve"}})},showArea:function(t,e){var i=this;s=new n.default({$this:i,canvasId:t,type:"area",fontSize:11,legend:!0,background:"#FFFFFF",pixelRatio:i.pixelRatio,categories:e.categories,animation:!1,series:e.series,xAxis:{disableGrid:!0},yAxis:{},width:i.cWidth*i.pixelRatio,height:i.cHeight*i.pixelRatio,dataLabel:!1,dataPointShape:!1})},touchLineA:function(t){o.scrollStart(t)},moveLineA:function(t){o.scroll(t)},touchEndLineA:function(t){o.scrollEnd(t),o.showToolTip(t,{format:function(t,e){return e+" "+t.name+":"+t.data}})},touchLineB:function(t){r.showToolTip(t,{format:function(t,e){return e+" "+t.name+":"+t.data}})},touchArea:function(t){s.showToolTip(t,{format:function(t,e){return e+" "+t.name+":"+t.data}})},audioPause:function(){c.audioPause(this)}}};e.default=f}).call(this,i("6e42")["default"])}},[["333c","common/runtime","common/vendor"]]]);